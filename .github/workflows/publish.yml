name: Publish Mod

on:
  push:
    tags:
      - "*"
  workflow_dispatch:
    inputs:
      version:
        required: true
        type: string

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      # Use checkout to publish the files in your repo
      - name: 'checkout'
        uses: actions/checkout@v4

      - name: 'pack'
        shell: pwsh
        run: ./pack.ps1

      - uses: GreenTF/upload-thunderstore-package@0edabca9fe3fe522375ffab9f215d09eeedd611b
        with:
          namespace: Citizen17 # the thunderstore 'team' to publish under
          description: Modpack for Reina Mort friends
          token: ${{ secrets.Thunderstore }}
          name: LethalReina_Modpack # the name of the package
          version: ${{ github.event_name == 'workflow_dispatch' && inputs.version || github.ref_name }} # Use the tag as the package version
          community: lethal-company
          file: ./LethalReina_Modpack.zip
          # repo: thunderstore.io
          categories: | # <-- notice this pipe character
            modpacks
