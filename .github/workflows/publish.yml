name: Publish Mod

on:
  push:
    tags:
      - "*"

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      # Use checkout to publish the files in your repo
      - name: 'checkout'
        uses: actions/checkout@v4

      - name: 'pack'
        shell: powershell
        run: ./pack.ps1

      - uses: GreenTF/upload-thunderstore-package@v4.3
        with:
          namespace: Citizen17 # the thunderstore 'team' to publish under
          description: Modpack for Reina Mort friends
          token: ${{ secrets.Thunderstore }}
          name: LethalReina_Modpack # the name of the package
          version: ${{ github.ref_name }} # Use the tag as the package version
          community: lethal-company
          file: ./LethalReina_Modpack.zip
          #repo: northstar.thunderstore.io
          categories: | # <-- notice this pipe character
            modpacks
